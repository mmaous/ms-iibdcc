<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Activité Pratique N° 2 Technologie XML</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ["Inter", "sans-serif"],
                        },
                    },
                },
            };
        </script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
            rel="stylesheet"
        />
        <style>
            body {
                font-family: "Inter", sans-serif;
            }
            pre {
                border-radius: 11px;
                background-color: #e0e0e075;
                padding: 10px;
                white-space: break-spaces;
                border: 1px dashed black;
                margin: 10px auto;
                font-family: 'Inter';
                font-weight: 500;
            }
        </style>
    </head>
    <body class="bg-gray-100 text-gray-800 p-4 md:p-8">
        <div class="mx-auto bg-white rounded-lg overflow-hidden">
            <header class="text-dark p-6 border-b border-gray-200">
                <h1 class="text-3xl font-bold">
                    Activité Pratique N° 2 Technologie XML
                </h1>
                <p class="text-gray-500">
                    Démonstration des étapes de l'exercice
                </p>
            </header>

            <div class="p-6 md:p-10 space-y-12">
                <div>
                    <h2 class="text-2xl font-semibold mb-3 text-gray-900">
                        1. Représentation graphique de l’arbre XML
                    </h2>
                    <div
                        class="bg-gray-50 p-4 rounded-lg border border-gray-200"
                    >
                        <img
                            src="arbre.png"
                            alt="Arbre XML"
                            class="w-full h-auto rounded-md border border-gray-300"
                        />
                    </div>
                </div>

                <div class="border-b border-gray-200">
                    <h2 class="text-2xl font-semibold mb-3 text-gray-900">
                        2.1 DTD (releve.dtd)
                    </h2>
                    <pre id="dtd-content">Chargement...</pre>
                </div>

                <div class="border-b border-gray-200">
                    <h2 class="text-2xl font-semibold mb-3 text-gray-900">
                        2.2 Document XML base sur DTD (releve.xml)
                    </h2>
                    <pre id="xml-content">Chargement...</pre>
                </div>

                <div class="border-b border-gray-200">
                    <h2 class="text-2xl font-semibold mb-3 text-gray-900">
                        3.1 Schéma XML (releve.xsd)
                    </h2>
                    <pre id="xsd-content">Chargement...</pre>
                    <img
                        src="releve_schema.png"
                        alt="schema representation"
                        class="w-full h-auto rounded-md border border-gray-300"
                    />
                </div>

                <div class="border-b border-gray-200">
                    <h2 class="text-2xl font-semibold mb-3 text-gray-900">
                        3.2 XML validé par XSD (releve_xsd.xml)
                    </h2>
                    <pre id="xml-xsd-content">Chargement...</pre>
                </div>

                <div class="border-b border-gray-200">
                    <h2 class="text-2xl font-semibold mb-3 text-gray-900">
                        4. Feuille de style XSL (Affichage global et totaux) (releve_totaux.xsl, releve_totaux.html)
                    </h2>
                    <pre id="xsl-total-content">Chargement...</pre>
                    <div class="bg-gray-50 rounded-lg border border-gray-200">
                        <iframe
                            src="releve_totaux.html"
                            class="w-full h-96 rounded-md"
                            frameborder="0"
                        ></iframe>
                    </div>
                </div>

                <div class="border-b border-gray-200">
                    <h2 class="text-2xl font-semibold mb-3 text-gray-900">
                        5. Feuille de style XSL (Opérations CREDIT uniquement). (releve_credit.xsl, releve_credit.html)
                    </h2>
                    <pre id="xsl-credit-content">Chargement...</pre>
                    <div class="bg-gray-50 rounded-lg border border-gray-200">
                        <iframe
                            src="releve_credit.html"
                            class="w-full h-96 rounded-md"
                            frameborder="0"
                        ></iframe>
                    </div>
                </div>
            </div>
        </div>

        <script>
            async function loadFileContent(fileUrl, targetElementId) {
                const targetElement = document.getElementById(targetElementId);
                if (!targetElement) return;

                try {
                    const response = await fetch(fileUrl);
                    if (!response.ok) {
                        throw new Error(
                            `Erreur réseau: ${response.statusText}`,
                        );
                    }
                    const text = await response.text();
                    targetElement.textContent = text;
                } catch (error) {
                    console.error(
                        "Erreur de chargement du fichier:",
                        fileUrl,
                        error,
                    );
                    targetElement.textContent = `Erreur: Impossible de charger le fichier `;
                    targetElement.style.color = "#f87171";
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                loadFileContent("./releve.xml", "xml-content");
                loadFileContent("releve.dtd", "dtd-content");
                loadFileContent("releve.xsd", "xsd-content");
                loadFileContent("releve_xsd.xml", "xml-xsd-content");
                loadFileContent("releve_totaux.xsl", "xsl-total-content");
                loadFileContent("releve_credit.xsl", "xsl-credit-content");
            });
        </script>
    </body>
</html>
